import * as mm from 'mingru-models';
import { VarInfo, AtomicTypeInfo, typeInfoToPointer } from './lib/varInfo.js';

export const queryableParam = 'queryable';
export const dbParam = 'db';
export const errorType = new AtomicTypeInfo('error', null, null);
export const limitVarName = 'limit';
export const intTypeInfo = new AtomicTypeInfo('int', 0, null);
export const uint64TypeInfo = new AtomicTypeInfo('uint64', 0, null);
export const boolTypeInfo = new AtomicTypeInfo('bool', false, null);
export const stringTypeInfo = new AtomicTypeInfo('string', '', null);

export const sqlDBType = typeInfoToPointer(new AtomicTypeInfo('DB', null, 'sql|database/sql'));
export const sqlTxType = typeInfoToPointer(new AtomicTypeInfo('Tx', null, 'sql|database/sql'));
export const dbxQueryableType = new AtomicTypeInfo(
  'Queryable',
  null,
  'mingru|github.com/mgenware/mingru-go-lib',
);
export const dbxQueryableVar = new VarInfo(queryableParam, dbxQueryableType);
export const sqlDBVar = new VarInfo(dbParam, sqlDBType);
export const insertedIDVar = new VarInfo(mm.ReturnValues.insertedID, uint64TypeInfo);
export const maxVarName = 'max';
export const selectActionMaxVar = new VarInfo(maxVarName, intTypeInfo);
export const pageVarName = 'page';
export const pageVar = new VarInfo(pageVarName, intTypeInfo);
export const pageSizeVarName = 'pageSize';
export const pageSizeVar = new VarInfo(pageSizeVarName, intTypeInfo);
export const hasNextVarName = 'hasNext';
export const hasNextVar = new VarInfo(hasNextVarName, boolTypeInfo);

export const resultVarName = 'result';
export const itemVarName = 'item';
export const fileHeader = `/${'*'.repeat(90)}
 * This file was automatically generated by mingru (https://github.com/mgenware/mingru)
 * Do not edit this file manually, your changes will be overwritten.
 ${'*'.repeat(90)}/

`;

export const defaultPackageName = 'da';
export const fmtImport = 'fmt';
export const queryParamsVarName = 'queryParams';
export const tableInputName = 'table';
export const tableInputVar = new VarInfo(tableInputName, stringTypeInfo);
